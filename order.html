<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Orders – QuickPress</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f6f7f8;
}
.box{
  max-width:700px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:14px;
}
input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-bottom:10px;
}
button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:30px;
  background:#f4b400;
  font-weight:bold;
  cursor:pointer;
}
.order{
  border:1px solid #eee;
  padding:12px;
  border-radius:10px;
  margin-top:12px;
}
.status{
  font-weight:bold;
}
</style>
</head>

<body>

<div class="box">
  <h2>My Orders</h2>

  <input id="mobile" placeholder="Enter your mobile number">
  <button onclick="loadOrders()">View Orders</button>

  <div id="result"></div>
</div>

<script>
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbzRKy_rqBNYB37IPVTXVhjEVquUFVU6yTIU3WtCbGkd7Zwr1Pe1AsHy4ylp36uElw6X0w/exec";

function loadOrders(){
  const mobile = document.getElementById("mobile").value.trim();
  if (!mobile) {
    alert("Please enter mobile number");
    return;
  }

  fetch(SCRIPT_URL + "?mobile=" + mobile)
    .then(res => res.json())
    .then(data => {
      const box = document.getElementById("result");
      box.innerHTML = "";

      if (!data.orders || data.orders.length === 0) {
        box.innerHTML = "<p>No orders found.</p>";
        return;
      }

      data.orders.forEach(o => {
        const div = document.createElement("div");
        div.className = "order";
        div.innerHTML = `
          <p><b>Order ID:</b> ${o.OrderId || o.OrderID}</p>
          <p><b>Total:</b> ₹${o.Total}</p>
          <p class="status"><b>Status:</b> ${o.Status}</p>
          <p><b>Date:</b> ${o.Date}</p>
        `;
        box.appendChild(div);
      });
    })
    .catch(() => {
      alert("Failed to load orders");
    });
}
</script>

</body>
</html>
